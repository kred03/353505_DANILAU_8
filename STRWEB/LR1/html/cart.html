<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Корзина заказа. Список добавленных объектов с действиями.">
    <link rel="icon" href="../images/favicon.ico">
    <title>Корзина — ЛР1 HTML</title>
  </head>
  <body>
    <header>
      <nav aria-label="Навигация">
        <ul>
          <li><a href="/">Главная</a></li>
          <li><a href="/product">Каталог</a></li>
        </ul>
      </nav>
      <h1>Корзина</h1>
    </header>

    <main>
      <section aria-labelledby="cart-list">
        <h2 id="cart-list">Товары в корзине</h2>
        <table>
          <caption>Содержимое корзины</caption>
          <thead>
            <tr>
              <th scope="col">Наименование</th>
              <th scope="col">Количество</th>
              <th scope="col">Цена</th>
              <th scope="col">Сумма</th>
              <th scope="col">Действия</th>
            </tr>
          </thead>
          <tbody>
            {% if items %}
            {% for row in items %}
            <tr>
              <td>{{ row.name }}</td>
              <td>
                <a href="/cart?action=decrease&item={{ row.key }}">−</a>
                <span>{{ row.qty }}</span>
                <a href="/cart?action=add&item={{ row.key }}">+</a>
              </td>
              <td>{{ row.price }}</td>
              <td>{{ row.line_total }}</td>
              <td>
                <a href="/cart?action=remove&item={{ row.key }}">Удалить</a>
              </td>
            </tr>
            {% endfor %}
            {% else %}
            <tr>
              <td colspan="5">Корзина пуста.</td>
            </tr>
            {% endif %}
          </tbody>
          <tfoot>
            <tr>
              <th colspan="3" scope="row">Итого</th>
              <td colspan="2">{{ total }}</td>
            </tr>
          </tfoot>
        </table>
        <p>
          <a href="/cart?action=clear">Очистить корзину</a>
        </p>
      </section>
    </main>

    <footer>
      <p><a href="/checkout">Перейти к оплате</a></p>
    </footer>
  </body>
</html>
